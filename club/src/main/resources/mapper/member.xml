<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="member">
	
	<!-- 회원가입 -->
	<select id="idCheck" parameterType="String" resultType="Integer">
		SELECT COUNT(*) FROM project.member WHERE id=#{id}
	</select>
	
	<insert id="insertMember" parameterType="member.MemberVO">
		INSERT INTO project.member(id, password, name, email, birth, gender, tel, profile) 
		VALUES(
		#{id}, md5(#{password}), #{name}, #{email}, #{birth}, #{gender}, #{tel}, #{profile});
	</insert>

	
	<!-- 유저 로그인 -->
	<select id="userLogin" parameterType="member.MemberVO" resultType="member.MemberVO">
		SELECT * FROM project.member WHERE id=#{id} AND password=md5(#{password})
	</select>


	<!-- 마이페이지 -->
	<select id="mypageView" parameterType="Integer" resultType="member.MemberVO">
		SELECT * FROM project.member WHERE num=#{num}
	</select>
	
	<update id="mypageUpdate" parameterType="member.MemberVO">
		UPDATE project.member 
		SET name=#{name}, birth=#{birth}, gender=${gender}, email=#{email}, tel=#{tel}
		<if test="profile != null and profile != ''">
		, profile=#{profile}
		</if>
		WHERE num=#{num} 
	</update>
	
	
 	<!-- 회원 리스트 -->    
	<select id="memberList" parameterType="member.MemberVO" resultType="member.MemberVO">
		SELECT * FROM project.member
	</select>
	
	<!-- 페이징 처리 -->
	<select id="count" resultType="Integer">
		SELECT count(*) FROM project.member
	</select>
</mapper>